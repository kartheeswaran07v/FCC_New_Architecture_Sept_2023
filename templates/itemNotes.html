{% block content %}
{% include "header.html" %}
<br><br>
                        <form action="{{url_for('itemNotes', proj_id=item.project.id, item_id=item.id)}}" method="post">
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-12">
                                        <div class="row">
                                            <!--Special Processing-->
                                            <div class="col-3 mt-2 p-3 shadow">
                                                <h6 class="Itemnotes_heading"><b>Special Processing</b></h6>
                                                <hr>
                                                <div class="row">
                                                    <div class="col-4">
                                                        <label for="cleaning">Cleaning</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <input type="text" name="cleaning" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-4">
                                                        <label for="certification">Certification</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <input type="text" name="certification" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-4">
                                                        <label for="paint_finish">Paint Finish</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <input type="text" name="paint_finish" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-4">
                                                        <label for="paint_cert">Paint Certs</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <input type="text" name=" paint_cert" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-4">
                                                        <label for="sp1">Special SP1</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <input type="text" name="sp1" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-4">
                                                        <label for="sp2">Special SP2</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <input type="text" name="sp2" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-4">
                                                        <label for="sp3">Special SP3</label>
                                                    </div>
                                                    <div class="col-8">
                                                        <input type="text" name="sp3" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
    
    
    
    
                                            </div>
    
                                            <!------Inspection Table-->
                                            <div class="col-3 mt-2 ml-3 p-3 shadow">
                                                <h6 class="Itemnotes_heading"><b>Inspection & Testing</b></h6>
                                                <hr>
                                                <div class="row">
                                                    <div class="col-5">
                                                        <label for="rm">RM Inspection</label>
                                                    </div>
                                                    <div class="col-7">
                                                        <input type="text" name="rm" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-5">
                                                        <label for="hydro">Hydro Test</label>
                                                    </div>
                                                    <div class="col-7">
                                                        <input type="text" name="hydro" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-5">
                                                        <label for="final">Final Inspection</label>
                                                    </div>
                                                    <div class="col-7">
                                                        <input type="text" name="final" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-5 pr-0">
                                                        <label for="paint_inspect">Painting Inspection</label>
                                                    </div>
                                                    <div class="col-7">
                                                        <input type="text" name="paint_inspect" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-5 pr-0">
                                                        <label for="packing_inspect">Packing Inspection</label>
                                                    </div>
                                                    <div class="col-7">
                                                        <input type="text" name="packing_inspect" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-5 pr-0">
                                                        <label for="vt1">Validation Test VT1</label>
                                                    </div>
                                                    <div class="col-7">
                                                        <input type="text" name="vt1" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                                <div class="row">
                                                    <div class="col-5 pr-0">
                                                        <label for="vt2">Validation Test VT2</label>
                                                    </div>
                                                    <div class="col-7">
                                                        <input type="text" name="vt2" class="form-control-sm-sm item_input">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
    
    
    
                            <div class="row mt-3">
                                <div class="col-12">
                                    <h6 class="Itemnotes_heading"><b>Item Notes</b></h6>
                                    <div class="row">
                                        <div class="col-1 mt-1">
                                            <select id="note" name="note" class="form-control-sm-sm item_select">
                                                <!-- <option>N1</option>
                                                <option>N2</option>
                                                <option>N3</option>
                                                <option>N4</option>
                                                <option>N5</option>
                                                <option>N6</option>
                                                <option>N7</option>
                                                <option>N8</option>
                                                <option>N9</option>
                                                <option>General</option> -->
                                            </select>
                                        </div>
                                        <div class="col-6 mt-1">
                                            <select id="nvalues" name="nvalues" class="form-control-sm-sm item_select">
                                                <!-- <option>Material inspections And Certifiction Requirement in accordance
                                                    with EN 10204 3.1 for wetted parts</option>
                                                <option>Dimension Inspection On The Assembled Valve Shall be as per
                                                    Approved General Assembly</option>
                                                <option> Material inspections And Certifiction Requirement in accordance
                                                    with EN
                                                    10204 3.1 for wetted parts</option> -->
                                            </select>
                                        </div>
                                        <div class="col-2">
                                            <button type="submit" class="btn btn-info btn-sm item_btn1">ADD</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="row mt-2 Item_notes">
                                <div class="col-8">
                                   <table class="table table-striped table-bordered tableitem" style="height: 30vh; overflow-y: scroll;">
                                        <thead class="table-sm itemhead">
                                            <tr>
                                                <th class="table_notes">Notes</th>
                                                <th class="table_content">Content</th>
                                                <th class="table_remove">Remove</th>
                                            </tr>
                                        </thead>
                                        <tbody class="table-sm itembody_table">
                                            {% for note in notes_list %}
                                            <tr>
                                                <td class="body_content">{{note.notesNumber}}</td>
                                                <td class="body_content">{{note.content}}</td>
                                                <td class="body_content">
                                                    <a href="{{url_for('delItemNotes', note_id=note.id, item_id=item.id, proj_id=item.project.id)}}">
                                                        <i class="fa-solid fa-close fa-1x closeicon item_cancle_icon"></i>
                                                    </a>
                                                </td>
                                            </tr>
                                            {% endfor %}
    
                                        </tbody>
                                   </table>
                                   <!-- <button type="button" class="btn item_btn">Save Data</button> -->
                                </div>
                                <!-- <div class="col-4">
                                    <button type="button" class="btn item_btn">Save Data</button>
                                </div> -->
                            </div> 
                            <div class="row">
                                <div class="col-12 fixed-bottom d-flex justify-content-end mb-3">
                                    <button type="submi" class="btn item_btn btn-sm btn-info">Save Data</button>
                                </div>
                            </div>  
                        </form>
                        <script>
                            // alert('js working')
                            var notesObject = JSON.parse({{dropdown|tojson}});
                            // var notesObject = {
                            //     "N1": ["Option 1", "Option 2", "Option 3"],
                            //     "N2": ["Option 4", "Option 5", "Option 6"],
                            //     "N3": ["Option 7", "Option 8", "Option 9"]
                            //   }
                        
                            window.onload = function() {
                              var notesSelect = document.getElementById("note");
                              var nvaluesSelect = document.getElementById("nvalues");
                              for (var x in notesObject) {
                                notesSelect.options[notesSelect.options.length] = new Option(x, x);
                              }
                        
                              console.log(nvaluesSelect.options.length)
                        
                              if (nvaluesSelect.options.length === 0){
                                
                                console.log(notesObject["N1"])
                                for (var y in notesObject["N1"]) {
                                  nvaluesSelect.options[nvaluesSelect.options.length] = new Option(notesObject["N1"][y], notesObject["N1"][y]);
                                }
                              }
                        
                              notesSelect.onchange = function() {
                                //empty Chapters- and Topics- dropdowns
                                nvalues.length = 0;
                                //display correct values
                                console.log(notesObject[this.value])
                                for (var y in notesObject[this.value]) {
                                  console.log(y)
                                  nvaluesSelect.options[nvaluesSelect.options.length] = new Option(notesObject[this.value][y], notesObject[this.value][y]);
                                }
                              }
                              
                            }
                        
                            $(document).ready(function() {
                            setTimeout(function() {
                                $(".flashes-error").fadeOut('slow');
                            }, 4000); // <-- time in milliseconds
                            });
                        
                            $(document).ready(function() {
                            setTimeout(function() {
                                $(".flashes").fadeOut('slow');
                            }, 2000); // <-- time in milliseconds
                            });
                        
                            $(document).ready(function() {
                            setTimeout(function() {
                                $(".flashes-success").fadeOut('slow');
                            }, 4000); // <-- time in milliseconds
                            });
                            // alert(notesObject)
                        </script>


                        
{% include "footer.html" %}
{% endblock %}