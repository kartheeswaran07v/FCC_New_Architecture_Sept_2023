{% block content %}
{% include "header.html" %}
<br>
                        <form action="{{url_for('generate_csv_project', proj_id=item.project.id, item_id=item.id)}}" id="itemForm" method="post">
                            <div class="row mt-2">
                                <div class="col-12">
                                    <h6 class="report_heading"><b>Reports</b></h6>
                                    <div class="row">
                                        <div class="col-3">
                                            <div class="project_reports mt-2 shadow p-3">
                                                <h6 class="sub_heading"><b>Project</b></h6>
                                                <div class="row ml-4">
                                                    <div class="form-check">
                                                        <input class="form-check-input" disabled type="checkbox" value="" name="datasheet" >
                                                        <label for="" class="form-check-label project_lable" for="flexCheckDefault">
                                                          Data Sheet
                                                        </label>
                                                    </div>
                                                </div>
            
                                                <div class="row ml-4 mt-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="" name="controlvalve" >
                                                        <label for="" class="form-check-label project_lable" for="flexCheckDefault">
                                                          Control Valve Sizing Sheet
                                                        </label>
                                                    </div>
                                                </div>
            
                                                <div class="row ml-4 mt-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" disabled type="checkbox" value="" name="actuatorsizing" >
                                                        <label for="" class="form-check-label project_lable" for="flexCheckDefault">
                                                          Actuator Sizing Sheet
                                                        </label>
                                                    </div>
                                                </div>
            
                                                <div class="row ml-4 mt-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" disabled type="checkbox" value=""  name="projectnotes"  >
                                                        <label for=""  class="form-check-label project_lable" for="flexCheckDefault">
                                                          Project Notes
                                                        </label>
                                                    </div>
                                                </div>
            
                                                <div class="row ml-4 mt-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" type="checkbox" value="projectsummary"  name="projectsummary" >
                                                        <label for="" class="form-check-label project_lable" for="flexCheckDefault">
                                                          Project Summary
                                                        </label>
                                                    </div>
                                                </div>
            
                                                <div class="row ml-4 mt-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" disabled type="checkbox" value=""  name="cvplot"  >
                                                        <label for="" class="form-check-label project_lable" for="flexCheckDefault">
                                                          CV Plot
                                                        </label>
                                                    </div>
                                                </div>
            
                                                <div class="row ml-4 mt-1">
                                                    <div class="form-check">
                                                        <input class="form-check-input" disabled type="checkbox" value=""  name="gad"  >
                                                        <label for="" class="form-check-label project_lable" for="flexCheckDefault">
                                                          GA Drawing
                                                        </label>
                                                    </div>
                                                </div>
            
                                                <div class="row ml-4 mt-5">
                                                    <div class="form-check">
                                                        <input class="form-check-input" disabled type="checkbox" value=""  name="collate"  >
                                                        <label for="" class="form-check-label project_lable" for="flexCheckDefault">
                                                          Collate
                                                        </label>
                                                    </div>
                                                    <button type="submit" class="btn btn-info btn-sm project_download_btn" id="submitBtn">Download</button>
                                                </div>
                                            </div>
                                        </div>
            
                                        <div class="col-4 ">
                                            <div class="itemselect_table mt-2 shadow p-3">
                                                <h6 class="sub_heading"><b>Items</b></h6>
                                                <div class="row">
                                                    <div class="form-check ml-3">
                                                        <input class="form-check-input" type="checkbox" value=""  name=""  id="selectAll">
                                                        <label for="" class="form-check-label project_lable" for="flexCheckDefault">
                                                          Select All
                                                        </label>
                                                    </div>
                                                </div>
            
                                                <div class="row mt-2">
                                                    <table class="table table-striped table-bordered ml-3 mt-1 project_print_table">
                                                        <thead class="table-sm project_print_table_head">
                                                            <tr>
                                                                <th>Select</th>
                                                                <th>Item No</th>
                                                                <th>Tag No</th>
                                                                <th>Valve Size</th>
                                                            </tr>
                                                        </thead>
            
                                                        <tbody class="table-sm">
                                                            {% for valve_ in items %}
                                                            <tr>
                                                                <td class="project_print_radio"><input type="checkbox" class="checkbox_item" name="item" value="{{valve_.item.id}}"></td>
                                                                <td>{{valve_.item.id}}</td>
                                                                <td>{{valve_.tagNumber}}</td>
                                                                <td>8</td>
                                                            </tr>
                                                            {% endfor %}
                                                        </tbody>
                                                    </table>
                                                    
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                        <script>
                            $(document).ready(function() {
                                $('#selectAll').on('click', function() {
                                   
                                    $('.checkbox_item').prop('checked', $(this).prop('checked'));
                                });
                                $('#submitBtn').on('click',function(){
                                    event.preventDefault();
                                    var selectedValues = [];
                                  
                                    $('.checkbox_item:checked').each(function() {
                                        
                                        selectedValues.push($(this).val());
                                    });
                                    console.log(selectedValues)

                                    for (var i = 0; i < selectedValues.length; i++) {
                                            $('<input>').attr({
                                                type: 'hidden',
                                                name: 'selectedValues[]', // Use array syntax for multiple values
                                                value: selectedValues[i]
                                            }).appendTo('#itemForm');
                                    }
                                        
                                       
                                    $('#itemForm').submit();
                                })

                            });
                        </script>
{% include "footer.html" %}
{% endblock %}


